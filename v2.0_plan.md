# Petrophyter v2.0 - Improvement Roadmap

Dokumen ini berisi rekomendasi improvement untuk versi 2.0, dikelompokkan berdasarkan kategori.

---

## A. Code & Performance

| # | Item | Priority | Effort | Description |
|---|------|----------|--------|-------------|
| **A1** | **Vectorized Interpolation** | High | Medium | Ganti loop di `interpolate_log_to_core()` dengan `np.searchsorted` untuk performa 10-50x lebih cepat |
| **A2** | **Async/Threading for Calculations** | High | High | Pindahkan kalkulasi berat ke QThread untuk UI tidak freeze saat processing |
| **A3** | **Lazy Loading for Large LAS** | Medium | Medium | Implementasi chunked loading untuk file LAS > 50MB |
| **A4** | **Caching Mechanism** | Medium | Medium | Cache hasil kalkulasi intermediate (VSH, PHIE) agar tidak re-calculate |
| **A5** | **Memory Optimization** | Medium | Low | Gunakan `float32` instead of `float64` untuk reduce memory 50% |
| **A6** | **Unit Tests** | High | High | Tambahkan pytest test suite untuk semua modules |
| **A7** | **Type Hints Completion** | Low | Low | Lengkapi type hints di semua function untuk better IDE support |
| **A8** | **Error Handling** | High | Medium | Improve exception handling dengan custom exceptions dan user-friendly messages |
| **A9** | **Logging System** | Medium | Low | Tambahkan proper logging dengan levels (DEBUG, INFO, WARNING, ERROR) |
| **A10** | **Configuration File** | Medium | Low | Pindahkan hardcoded defaults ke config.yaml untuk easy customization |
| **A11** | **Plugin Architecture** | Low | High | Design plugin system untuk custom calculations/methods |

---

## B. Petrophysics Methods (Teknis)

| # | Item | Priority | Effort | Description |
|---|------|----------|--------|-------------|
| **B1** | **Dual-Water Sw Model** | High | High | Tambah Waxman-Smits dan Dual-Water model untuk shaly sand yang lebih akurat |
| **B2** | **PHIE Gas Correction** | High | Medium | Implementasi gas correction untuk N-D porosity saat NPHI < PHID |
| **B3** | **Raymer-Hunt-Gardner Sonic** | Medium | Low | Tambah RHG equation sebagai alternatif Wyllie untuk sonic porosity |
| **B4** | **Clavier Vsh** | Medium | Low | Implementasi Clavier equation untuk Vsh (sudah ada Larionov) |
| **B5** | **CGR/SGR Support** | Medium | Medium | Support untuk Computed GR dan Spectral GR curves |
| **B6** | **Multi-Mineral Model** | High | High | Implementasi multi-mineral solving (Quartz-Calcite-Clay) |
| **B7** | **NMR Integration** | Low | High | Support untuk NMR permeability (Coates, SDR models) |
| **B8** | **Capillary Pressure** | Medium | Medium | Implementasi Leverett J-function dan Pc curves |
| **B9** | **BVW (Bulk Volume Water)** | Medium | Low | Tambahkan BVW = PHIE × Sw curve |
| **B10** | **HCPV Calculation** | High | Low | Tambahkan Hydrocarbon Pore Volume curve |
| **B11** | **Uncertainty Analysis** | Medium | High | Monte Carlo uncertainty untuk porosity dan Sw |
| **B12** | **Zone-Based Parameters** | High | Medium | Allow different parameters per formation zone |

---

## C. UI/UX

| # | Item | Priority | Effort | Description |
|---|------|----------|--------|-------------|
| **C1** | **Interactive Log Plot** | Critical | High | Plot log curves dengan zoom, pan, depth selection, dan formation tops overlay |
| **C2** | **Undo/Redo** | High | Medium | Implementasi undo stack untuk parameter changes |
| **C3** | **Session Save/Load** | Critical | Medium | Save & load entire session (data + parameters) ke file project |
| **C4** | **Parameter Presets** | High | Low | Save/load named parameter presets (e.g., "Carbonate", "Tight Sand") |
| **C5** | **Depth Track Selection** | High | Medium | Interactive depth range selection dengan drag handles |
| **C6** | **Real-time Plot Update** | Medium | Medium | Update plots live saat parameter slider berubah |
| **C7** | **Dark/Light Theme Toggle** | Medium | Low | Add toggle button untuk switch theme |
| **C8** | **Curve Color Customization** | Medium | Low | Allow user customize curve colors |
| **C9** | **Print/PDF Report** | High | Medium | Generate printable PDF report dengan plots dan summary |
| **C10** | **Keyboard Shortcuts** | Medium | Low | Comprehensive keyboard shortcuts (Ctrl+Z undo, etc.) |
| **C11** | **Multi-Well Support** | Critical | High | Support analisis multiple wells dalam satu session |
| **C12** | **Drag-Drop File Loading** | Medium | Low | Support drag-drop untuk LAS files |
| **C13** | **Responsive Layout** | Medium | Medium | Better responsive layout untuk different screen sizes |
| **C14** | **New Project / Reset** | High | Low | Tombol untuk menutup/reset data yang terbuka dan mulai project baru |

---

## Priority Matrix

```
                    Low Effort          High Effort
                ┌───────────────────┬───────────────────┐
     Critical   │ -                 │ C1, C3, C11       │
                ├───────────────────┼───────────────────┤
       High     │ B9, B10, C4, C7   │ A2, A6, A8, B1,   │
                │                   │ B2, B6, C2, C9    │
                ├───────────────────┼───────────────────┤
      Medium    │ A5, A7, A9, A10,  │ A1, A3, A4, B5,   │
                │ B3, B4, C8, C10,  │ B8, B11, B12,     │
                │ C12               │ C5, C6, C13       │
                ├───────────────────┼───────────────────┤
        Low     │ A7                │ A11, B7           │
                └───────────────────┴───────────────────┘
```

---

## Rekomendasi Prioritas untuk v2.0

### Phase 1 - Foundation (Must Have)
1. **C1** - Interactive Log Plot (ini game-changer untuk usability) ✅
2. **C3** - Session Save/Load (user tidak perlu re-input parameters) ✅
3. **A2** - Async calculations (prevent UI freeze) ✅
4. **A6** - Unit tests (foundation untuk development) ✅
5. **B2** - Gas correction untuk PHIE ✅

### Phase 2 - Core Features
6. **B1** - Dual-Water Sw model ✅
7. **B12** - Zone-based parameters (sementara manual input formasi) ⌛
8. **C2** - Undo/Redo (belum perlu) ❌
9. **C9** - PDF Report (belum perlu) ❌
10. **B10** - HCPV curve (on progress) ✅

### Phase 3 - Polish
11. **C4** - Parameter presets
12. **C11** - Multi-well support
13. **A8** - Better error handling
14. **B6** - Multi-mineral model

---

## Quick Wins (Low Effort, High Impact)

Ini adalah items yang bisa diselesaikan dengan cepat:

1. **B9** - BVW curve (1-2 jam)
2. **B10** - HCPV curve (1-2 jam)
3. **C7** - Theme toggle (2-3 jam)
4. **C12** - Drag-drop loading (2-3 jam)
5. **A9** - Basic logging (2-3 jam)
6. **C4** - Parameter presets (3-4 jam)
7. **B3** - RHG Sonic equation (2-3 jam)

---

## Notes

> [!IMPORTANT]
> **C1 (Interactive Log Plot)** adalah improvement terpenting karena:
> - Visualisasi log adalah core dari petrophysics workflow
> - Saat ini tidak ada cara mudah untuk melihat hubungan curves vs depth
> - Interactive plot akan sangat meningkatkan user experience

> [!TIP]
> **Consider using existing libraries:**
> - `pyqtgraph` untuk interactive plotting (lebih cepat dari matplotlib)
> - `lasio` untuk LAS file handling (jika belum menggunakan)
> - `pint` untuk unit conversion

---

*Document Version: 2025-12-26*
